const camelize = require('camelize')

module.exports = {
	select: (pool, query, cb) => {
		pool.getConnection((err, connection) => {
			if (err) {
				console.log('pool error', err)
				cb(err)
			} else {
				connection.query(query.str, query.params, camelizeCallback(cb))
			}
		})
	}
}

function camelizeCallback(cb) {
	return function(err, dbObject) {
		if (err) {
			console.log('query error', err)
			cb(err)
		} else {
			cb(null, camelize(dbObject))
		}
	}
}
